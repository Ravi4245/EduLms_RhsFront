<!-- Top Navbar -->
<header class="top-navbar">
  <div class="navbar-content">
    <div class="navbar-center-text">
      <h1>Hi {{ profile.fullName }}, welcome to your dashboard</h1>
    </div>
    <button class="logout-btn" (click)="logout()">ğŸšª Logout</button>
  </div>
</header>


<div class="dashboard-container">

  

  <!-- Sidebar -->
  <nav class="sidebar">
    <h2>ğŸ“ Student Menu</h2>
    <ul>
      <li (click)="activeSection = 'profile'">ğŸ‘¤ Profile</li>
      <li (click)="activeSection = 'enroll'">ğŸ“ Enroll in Course</li>
      <li (click)="activeSection = 'my-courses'">ğŸ“š My Courses</li>
      <li (click)="activeSection = 'assignments'">ğŸ“„ Assignments</li>
      <li (click)="activeSection = 'submit'">ğŸ“¤ Submit Assignment</li>
      <li (click)="activeSection = 'performance'">ğŸ“ˆ Performance Report</li>
    </ul>
  </nav>

  <!-- Main Content -->
  <div class="content">
    

    <!-- Profile -->
  
<section *ngIf="activeSection === 'profile'" class="card">
  <h2>ğŸ‘¤ Profile Details</h2>
  
  <div class="profile-grid">
    <div class="profile-item">
      <label>Full Name:</label>
      <span>{{ profile.fullName }}</span>
    </div>
    <div class="profile-item">
      <label>Email:</label>
      <span>{{ profile.email }}</span>
    </div>
    <div class="profile-item">
      <label>Gender:</label>
      <span>{{ profile.gender }}</span>
    </div>
    <div class="profile-item">
      <label>Date of Birth:</label>
      <span>{{ profile.dob | date }}</span>
    </div>
    <div class="profile-item">
      <label>Grade Level:</label>
      <span>{{ profile.gradeLevel }}</span>
    </div>
    <div class="profile-item">
      <label>Address:</label>
      <span>{{ profile.address }}</span>
    </div>
  </div>
</section>


    <!-- Enroll in Course -->
     
    <section *ngIf="activeSection === 'enroll'" class="card">
      <h2>ğŸ“ Enroll in a Course</h2>
      <label>Course ID</label>
      <input [(ngModel)]="enrollData.courseId" type="number" placeholder="Course ID" />
      <button (click)="enrollCourse()">Enroll</button>
    </section>
    
    <!-- My Courses -->
<section *ngIf="activeSection === 'my-courses'" class="card">
  <h2>ğŸ“š My Courses</h2>
  <div class="course-grid">
    <div class="course-card" *ngFor="let c of enrolledCourses; trackBy: trackByCourseId">
      <p><strong>ID:</strong> {{ c.courseId }}</p>
      <p><strong>Name:</strong> {{ c.courseName }}</p>
      <p><strong>Category:</strong> {{ c.category }}</p>
      <a *ngIf="c.pdfFilePath" [href]="'https://localhost:7072/' + c.pdfFilePath" target="_blank" class="view-link">
        ğŸ“„ View PDF
      </a>
    </div>
  </div>
</section>







<section *ngIf="activeSection === 'assignments'" class="card">
  <h2>ğŸ“„ Assigned Assignments</h2>

  <!-- Debug output: shows raw data -->
  <!-- <pre *ngIf="assignedAssignments">{{ assignedAssignments | json }}</pre> -->

  <!-- Show message if no assignments -->
  <div *ngIf="assignedAssignments.length === 0">
    <p>âœ… No assignments available to show.</p>
  </div>

  <!-- Render each assignment -->
  <div class="assignment-grid" *ngIf="assignedAssignments.length > 0">
    <div class="assignment-card" *ngFor="let a of assignedAssignments">
      <p><strong>ID:</strong> {{ a.assignmentId }}</p>
      <h3>{{ a.title }}</h3>
      <p>{{ a.description }}</p>
      <p><strong>Due:</strong> {{ a.dueDate | date }}</p>

      <!-- Adjust the domain as needed -->
      <a *ngIf="a.file" [href]="'https://localhost:7072/' + a.file" target="_blank" class="view-link">
        ğŸ“„ View PDF
      </a>
    </div>
  </div>
</section>



<!-- Submit Assignment -->
<section *ngIf="activeSection === 'submit'" class="card">
  <h2>ğŸ“¤ Submit Assignment</h2>

  <!-- Assignment Dropdown -->
  <label for="assignmentDropdown">ğŸ“ Select Assignment:</label>
  <select id="assignmentDropdown" [(ngModel)]="submitData.assignmentId">
    <option value="" disabled selected>Select an assignment</option>
    <option *ngFor="let a of assignedAssignments" [value]="a.assignmentId">
      {{ a.title }} (ID: {{ a.assignmentId }})
    </option>
  </select>

  <!-- File Upload -->
  <label for="fileUpload">ğŸ“ Upload File:</label>
  <input id="fileUpload" type="file" (change)="onFileChange($event)" accept=".pdf,.doc,.docx" />

  <!-- Submit Button -->
  <button (click)="submitAssignment()">Submit</button>
</section>





    <!-- Performance -->
    <section *ngIf="activeSection === 'performance'" class="card">
      <h2>ğŸ“ˆ Performance Report</h2>
      <div class="report-card" *ngFor="let p of performanceReports">
        <p><strong>Course:</strong> {{ p.courseName }}</p>
        <p><strong>Marks:</strong> {{ p.grade }}</p>
        <p><strong>Remarks:</strong> {{ p.remarks }}</p>
      </div>
    </section>
  </div>
 
</div>
