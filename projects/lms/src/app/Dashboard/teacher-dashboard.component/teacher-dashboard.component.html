  <header class="top-navbar">
    <div class="navbar-content">
      <div class="navbar-center-text">
        <h1>Hi {{ profile.fullName }}, welcome to your dashboard</h1>
      </div>
      <button class="logout-btn" (click)="logout()">ğŸšª Logout</button>
    </div>
  </header>

<div class="dashboard-container">
  <!-- Sidebar -->
  <nav class="sidebar">
    <h2>ğŸ“‹ Menu</h2>
    <ul>
      <li (click)="activeSection = 'profile'">ğŸ‘¤ Profile</li>
      <li (click)="activeSection = 'create-course'">ğŸ“˜ Create Course</li>
      <li (click)="activeSection = 'my-courses'">ğŸ“š My Courses</li>
      <li (click)="activeSection = 'enrolled-students'">ğŸ‘¨â€ğŸ“ Enrolled Students</li>
      <li (click)="activeSection = 'create-assignment'">ğŸ“ Create Assignment</li>
      <li (click)="activeSection = 'my-assignments'; loadCreatedAssignments()">ğŸ§¾ My Assignments</li>
      <!-- <li (click)="activeSection = 'view-submissions'">ğŸ“¤ View Submissions</li> -->
      <li (click)="activeSection = 'performance-report'">ğŸ“ˆ Performance Report</li>
      <li (click)="activeSection = 'assign-course'">ğŸ“š Assign Course</li>
      <li (click)="activeSection = 'assign-assignment'">ğŸ§¾ Assign Assignment</li>
      <li (click)="activeSection = 'all-submissions'">ğŸ“ All Submissions</li>
    </ul>
  </nav>

  <!-- Main Content -->
  <div class="content">
    <h1>ğŸ‘¨â€ğŸ« Teacher Dashboard</h1>

    <!-- Profile -->
    <section *ngIf="activeSection === 'profile'" class="card">
      <h2>ğŸ‘¤ Profile</h2>
      <p><strong>Full Name:</strong> {{ profile.fullName }}</p>
      <p><strong>Email:</strong> {{ profile.email }}</p>
      <p><strong>Experience:</strong> {{ profile.experience }} years</p>
      <p><strong>Specialization:</strong> {{ profile.specialization }}</p>
      <p><strong>Phone:</strong> {{ profile.phone }}</p>
    </section>

    <!-- Create Course -->
    <section *ngIf="activeSection === 'create-course'" class="card">
  <h2>ğŸ“˜ Create Course</h2>
  <input name="courseName" [(ngModel)]="newCourse.courseName" placeholder="Course Name" />
  <input name="description" [(ngModel)]="newCourse.description" placeholder="Description" />
  <input name="category" [(ngModel)]="newCourse.category" placeholder="Category" />
  <input type="file" (change)="onCoursePdfSelected($event)" accept=".pdf" />

  <button (click)="createCourse()">Create Course</button>
</section>


    <!-- My Courses -->
<section *ngIf="activeSection === 'my-courses'" class="card">
  <h2>ğŸ“š My Courses</h2>
  <ul>
    <li *ngFor="let c of courses">
      <strong>{{ c.courseName }}</strong> ({{ c.category }})
      <br />
      <span><strong>Course ID:</strong> {{ c.courseId }}</span>
      <br />
      
      <button (click)="deleteCourse(c.courseId)">Delete</button>
      <!-- <button (click)="updateCourse(c)">Update</button> -->

      <!-- âœ… View PDF Button -->
      <button *ngIf="c.pdfFilePath" (click)="viewPdf(c.pdfFilePath)">ğŸ“„ View PDF</button>
    </li>
  </ul>
</section>



<!-- Enrolled Students with Pagination -->
<section *ngIf="activeSection === 'enrolled-students'" class="card">
  <h2>ğŸ‘¨â€ğŸ“ Approved Students</h2>

  <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Email</th>
        <th>Student ID</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of paginatedEnrolledStudents">
        <td>{{ student.studentName }}</td>
        <td>{{ student.email }}</td>
        <td>{{ student.studentId }}</td>
      </tr>
    </tbody>
  </table>

  <!-- Pagination Controls -->
  <div class="pagination-controls">
    <button (click)="currentPage = currentPage - 1" [disabled]="currentPage === 1">
      â¬…ï¸ Prev
    </button>

    <span>Page {{ currentPage }} of {{ totalPages }}</span>

    <button (click)="currentPage = currentPage + 1" [disabled]="currentPage === totalPages">
      Next â¡ï¸
    </button>
  </div>
</section>




    <!-- Create Assignment -->
    <section *ngIf="activeSection === 'create-assignment'" class="card">
      <h2>ğŸ“ Create Assignment</h2>
      <input [(ngModel)]="newAssignment.courseId" placeholder="Course ID" type="number" />
      <input [(ngModel)]="newAssignment.title" placeholder="Title" />
      <input [(ngModel)]="newAssignment.description" placeholder="Description" />
      <input [(ngModel)]="newAssignment.dueDate" type="date" />
      <input type="file" (change)="onFileSelected($event)" accept=".pdf" />
      <button (click)="createAssignment()">Create Assignment</button>
    </section>


    
<!-- My Created Assignments -->
<section *ngIf="activeSection === 'my-assignments'" class="card my-assignments">
  <h2>ğŸ§¾ My Created Assignments</h2>
  
  <ul>
    <li *ngFor="let a of assignments">
      <strong>Assignment ID:</strong> {{ a.assignmentId }} <br />
      <strong>Title:</strong> {{ a.title }} <br />
      <strong>Course ID:</strong> {{ a.courseId }} <br />
      <strong>Due Date:</strong> {{ a.dueDate | date }} <br />
      <a *ngIf="a.uploadFilePath" [href]="'https://localhost:7072/' + a.uploadFilePath" target="_blank">ğŸ“„ View PDF</a>
      <br />

      <button (click)="startEditAssignment(a)">âœï¸ Edit</button>
      <button (click)="deleteAssignment(a.assignmentId)">ğŸ—‘ï¸ Delete</button>
    </li>
  </ul>

  <!-- Edit form -->
  <div *ngIf="editingAssignment" class="edit-form">
    <h3>Edit Assignment (ID: {{ editingAssignment.assignmentId }})</h3>
    <label>
      Title:
      <input [(ngModel)]="editingAssignment.title" />
    </label>
    <label>
      Due Date:
      <input type="date" [(ngModel)]="editingAssignment.dueDate" />
    </label>
    <label>
      Course ID:
      <input type="number" [(ngModel)]="editingAssignment.courseId" disabled />
    </label>
    <br />
    <button (click)="updateAssignment()">Save</button>
    <button (click)="cancelEdit()">Cancel</button>
  </div>
</section>



    <!-- View Submissions
    <section *ngIf="activeSection === 'view-submissions'" class="card">
      <h2>ğŸ“¤ View Submissions</h2>
      <input #aid type="number" placeholder="Assignment ID" />
      <button (click)="viewSubmissions(+aid.value)">Load Submissions</button>
      <div *ngFor="let s of submissions" class="submission-card">
        <p><strong>Student ID:</strong> {{ s.studentId }}</p>
        <p><strong>Grade:</strong> {{ s.grade }}</p>
        <p><strong>Feedback:</strong> {{ s.feedback }}</p>
        <input [(ngModel)]="s.grade" type="number" placeholder="New Grade" />
        <input [(ngModel)]="s.feedback" placeholder="New Feedback" />
        <button (click)="gradeSubmission(s)">Update</button>
      </div>
    </section> -->

    <!-- Performance Report -->
   <section *ngIf="activeSection === 'performance-report'" class="card">
  <h2>ğŸ“ˆ Create Performance Report</h2>
  <input [(ngModel)]="newPerformance.studentId" placeholder="Student ID" />
  <input [(ngModel)]="newPerformance.courseId" placeholder="Course ID" />
  <input [(ngModel)]="newPerformance.averageGrade" type="number" placeholder="Marks" />
  <input [(ngModel)]="newPerformance.remarks" placeholder="Remarks" />
  <button (click)="createPerformance()">Create Report</button>

  <h3>ğŸ“Š Existing Reports</h3>
  <ul>
    <li *ngFor="let p of performanceReports">
      <div *ngIf="editingReportId !== p.performanceReportId">
        Student: {{ p.studentId }} | Course: {{ p.courseId }} | Grade: {{ p.averageGrade }} | Remarks: {{ p.remarks }}
        <button (click)="editReport(p)">âœï¸ Edit</button>
      </div>

      <div *ngIf="editingReportId === p.performanceReportId">
        Student: {{ p.studentId }} | Course: {{ p.courseId }}
        <input [(ngModel)]="p.averageGrade" type="number" placeholder="Grade" />
        <input [(ngModel)]="p.remarks" placeholder="Remarks" />
        <button (click)="updatePerformance(p)">âœ… Update</button>
        <button (click)="cancelEdit()">âŒ Cancel</button>
      </div>
    </li>
  </ul>
</section>


    <!-- Assign Course -->
    <section *ngIf="activeSection === 'assign-course'" class="card">
      <h2>ğŸ“š Assign Course</h2>
      <input [(ngModel)]="assignCourseData.studentId" placeholder="Student ID" />
      <input [(ngModel)]="assignCourseData.courseId" placeholder="Course ID" />
      <button (click)="assignCourseToStudent()">Assign</button>
    </section>

    <!-- Assign Assignment -->
    <section *ngIf="activeSection === 'assign-assignment'" class="card">
      <h2>ğŸ§¾ Assign Assignment</h2>
      <input [(ngModel)]="assignAssignmentData.studentId" placeholder="Student ID" />
      <input [(ngModel)]="assignAssignmentData.assignmentId" placeholder="Assignment ID" />
      <button (click)="assignAssignmentToStudenta()">Assign</button>
    </section>

    <!-- All Submissions -->
    <section *ngIf="activeSection === 'all-submissions'" class="card">
      <h2>ğŸ“ All Submissions</h2>
      
      <ul>
        <li *ngFor="let s of submissions">
          ğŸ“„ <strong>{{ s.assignmentTitle }}</strong> by {{ s.studentName }}
          <br />
          File: {{ s.grade }} 
          <a [href]="'https://localhost:7072/' + s.submittedFilePath" target="_blank">View File</a>
        </li>
      </ul>
    </section>
  </div>
</div>
